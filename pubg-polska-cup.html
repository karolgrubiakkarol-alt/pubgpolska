<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PUBG POLSKA CUP 2025</title>
    <link rel="icon" href="https://i.imgur.com/HcTRskR.png" type="image/png">
    
    <style>
        /* (Style pozostają bez zmian - są poprawne) */
        body { background-color: #1e1e1e; color: #e0e0e0; font-family: 'Arial', sans-serif; margin: 0; padding: 0; line-height: 1.6; }
        .page-wrapper { width: 95%; max-width: 1200px; margin: 30px auto; background-color: rgba(30, 30, 30, 0.95); border-radius: 10px; box-shadow: 0 0 25px rgba(0,0,0,0.8); overflow: hidden; min-height: 100vh; }
        .main-header { background-color: #252525; padding: 20px; text-align: center; border-bottom: 4px solid #ffc107; cursor: pointer; transition: background 0.3s; }
        .main-header:hover { background-color: #2f2f2f; }
        .header-logo { max-width: 100%; height: auto; display: block; margin: 0 auto; transition: transform 0.3s ease; }
        .main-header:hover .header-logo { transform: scale(1.02); }
        .main-navbar { background-color: #121212; padding: 0; text-align: center; border-bottom: 2px solid #444; display: flex; justify-content: center; flex-wrap: wrap; }
        .main-navbar a { color: #b0b0b0; text-decoration: none; font-size: 1.1em; font-weight: bold; padding: 20px 30px; transition: 0.3s; border-bottom: 4px solid transparent; }
        .main-navbar a:hover { background-color: #2a2a2a; color: #fff; }
        .main-navbar a.active { background-color: #2a2a2a; color: #ffc107; border-bottom: 4px solid #ffc107; }
        .content-padding { padding: 30px; }
        .video-container { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; background: #000; margin-bottom: 30px; border-radius: 8px; border: 1px solid #333; box-shadow: 0 4px 20px rgba(0,0,0,0.5); }
        .video-container iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .internal-navbar { background-color: #252525; padding: 10px; text-align: center; border-radius: 8px; margin-bottom: 30px; border-bottom: 2px solid #444; }
        .internal-navbar a { color: #bbb; text-decoration: none; font-weight: bold; margin: 0 10px; padding: 5px 10px; display: inline-block; transition: 0.3s; }
        .internal-navbar a:hover { color: #ffc107; background: rgba(255,255,255,0.05); border-radius: 4px;}
        h3 { color: #ffc107; border-bottom: 2px solid #444; padding-bottom: 10px; margin-top: 40px; font-size: 1.8em;}
        .cta-button { display: inline-block; background-color: #ffc107; color: #121212; padding: 15px 30px; font-weight: bold; text-decoration: none; text-transform: uppercase; border-radius: 5px; margin-top: 15px; text-align: center; transition: 0.2s; }
        .cta-button:hover { background-color: #fff; transform: scale(1.05); }
        .info-list { list-style: none; padding: 0; }
        .info-list li { background: #2a2a2a; padding: 12px; margin-bottom: 8px; border-left: 4px solid #ffc107; border-radius: 4px; color: #ccc; }
        .info-list strong { color: #fff; min-width: 120px; display: inline-block; }
        .info-list a { color: #ffc107; text-decoration: none; font-weight: bold; }
        .top-sponsors-container { display: flex; justify-content: center; align-items: flex-end; gap: 20px; flex-wrap: wrap; text-align: center; margin-bottom: 40px; }
        .sponsor-logo { border-radius: 8px; background: #111; display: block; margin: 0 auto 10px auto; object-fit: contain; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .tier-1 .sponsor-logo { width: 180px; height: 180px; border: 3px solid #ffc107; }
        .tier-1 .sponsor-name { font-size: 1.4em; color: #fff; font-weight: bold; text-shadow: 0 0 10px rgba(255, 193, 7, 0.4); display: block;}
        .tier-2 .sponsor-logo { width: 130px; height: 130px; border: 3px solid #c0c0c0; }
        .tier-2 .sponsor-name { color: #e0e0e0; font-weight: bold; display: block;}
        .tier-3 .sponsor-logo { width: 130px; height: 130px; border: 3px solid #cd7f32; }
        .tier-3 .sponsor-name { color: #cd7f32; font-weight: bold; display: block;}
        .sponsor-amount { background: #333; color: #ffc107; padding: 2px 8px; border-radius: 4px; font-weight: bold; font-size: 0.9em; display: inline-block; margin-top: 5px; }
        .sponsor-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; margin-top: 20px; }
        .sponsor-card { background: #2a2a2a; padding: 15px; border-left: 3px solid #ffc107; text-align: center; border-radius: 4px; transition: 0.2s; }
        .sponsor-card:hover { background: #333; }
        .sponsor-card span { display: block; }
        .sponsor-name-small { color: #fff; font-weight: bold; margin-bottom: 5px; }
        
        /* GRID DLA TEAMÓW (Skopiowane z charity dla spójności) */
        .team-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
        @media (max-width: 900px) { .team-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 600px) { .team-grid { grid-template-columns: 1fr; } }

        .team-card { background: #2a2a2a; padding: 15px; border-left: 3px solid #ffc107; border-radius: 4px; }
        .team-card-header { font-weight: bold; color: #ffc107; border-bottom: 1px solid #444; padding-bottom: 5px; cursor: pointer; display: flex; justify-content: space-between; }
        .team-number { color: #fff; margin-right: 5px; }
        .player-sublist { display: none; list-style: none; padding-left: 0; margin-top: 10px; color: #ccc; font-size: 0.9em; }
        .player-sublist.expanded { display: block; }
        .player-sublist li { border-bottom: 1px dotted #444; padding: 3px 0; }
        .player-sublist a { color: #fff; text-decoration: none; }
        .player-sublist a:hover { color: #ffc107; }
        .captain { font-weight: bold; color: #fff; }
        
        .tabs-nav { display: flex; flex-wrap: wrap; border-bottom: 2px solid #444; margin-bottom: 0; }
        .tab-link { background: #333; color: #bbb; border: none; padding: 12px 20px; flex-grow: 1; cursor: pointer; font-weight: bold; margin-right: 2px; }
        .tab-link:hover { background: #444; color: #fff; }
        .tab-link.active { background: #ffc107; color: #000; }
        .tab-content { display: none; padding: 15px; background: #2a2a2a; border: 1px solid #444; border-top: none; }
        .tab-content.active { display: block; }
        .results-table-container { overflow-x: auto; }
        .results-table { width: 100%; border-collapse: collapse; background: #222; min-width: 600px; font-size: 0.95em; }
        .results-table th { background: #ffc107; color: #000; padding: 12px; text-align: center; }
        .results-table td { border: 1px solid #444; padding: 10px; text-align: center; color: #ccc; }
        .results-table td:nth-child(2) { text-align: left; font-weight: bold; color: #fff; }
        .rules-container { background: #2a2a2a; padding: 20px; border-radius: 8px; border: 1px solid #444; max-height: 400px; overflow-y: auto; font-family: monospace; color: #ccc; white-space: pre-wrap; }
        footer { text-align: center; padding: 20px; border-top: 2px solid #333; margin-top: 40px; color: #777; }
        .collapsible-trigger { cursor: pointer; }
        .collapsible-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-out; }
        .collapsible-content.expanded { max-height: 5000px; }
    </style>
</head>
<body>

<div class="page-wrapper">
    <header class="main-header" onclick="window.location.href='https://www.pubgpolska.pl/'">
        <a href="https://www.pubgpolska.pl/">
            <img src="https://i.imgur.com/VhDs7mJ.png" alt="PUBG POLSKA" class="header-logo">
        </a>
    </header>

    <nav class="main-navbar">
        <a href="https://www.pubgpolska.pl/">Strona Główna</a>
        <a href="turniej-charytatywny.html">Turniej Charytatywny 2025</a>
        <a href="pubg-polska-cup.html" class="active">PUBG POLSKA CUP 2025</a>
        <a href="triumfator-v.html">Triumfator V</a>
    </nav>

    <div class="content-padding">
        
        <div class="video-container">
            <iframe 
                src="https://www.youtube.com/embed/PlYfuu3Q7ME?si=gfcqtJlkbbWlyxSA" 
                title="PUBG Trailer" 
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                referrerpolicy="strict-origin-when-cross-origin" 
                allowfullscreen>
            </iframe>
        </div>

        <nav class="internal-navbar">
            <a href="#fantasycoach">Fantasy Coach</a>
            <a href="#szczegoly">Szczegóły</a>
            <a href="#sponsorzy">Sponsorzy</a>
            <a href="#teamy">Teamy</a>
            <a href="#wyniki">Wyniki</a>
            <a href="#regulamin">Regulamin</a>
            <a href="#kontakt">Kontakt</a>
        </nav>

        <section id="zapisy" style="text-align: center; background: #2a2a2a; padding: 30px; border-radius: 8px; margin-bottom: 40px;">
            <h3 style="margin-top: 0;">Aplikacja Fantasy Coach</h3>
            <p style="color: #ccc;">Stwórz swój dream team, wybierz zawodników i walcz o najlepszy wynik!</p>
            <a href="https://fantasycoach.web.app/fantasy.html" target="_blank" class="cta-button">
                ZOBACZ WYNIKI FANTASY
            </a>
        </section>

        <section id="szczegoly">
            <h3>Szczegóły Turnieju</h3>
            <ul class="info-list">
                <li><strong>Data:</strong> 29 Listopada 2025 (Sobota), start 18:00</li>
                <li><strong>Format:</strong> SQUAD FPP (drużyny 4-osobowe)</li>
                <li><strong>Serwer:</strong> EU</li>
                <li><strong>Mapy:</strong> 2× Miramar, Rondo, Taego oraz 2× Erangel</li>
                <li><strong>Pula nagród:</strong> Z dobrowolnych wpisowych (50%/30%/20%)</li>
                <li><strong>Wpisowe:</strong> Dobrowolne</li>
                <li><strong>Transmisja:</strong> <a href="https://twitch.tv/akerman88" target="_blank">twitch.tv/akerman88</a></li>
                <li><strong>Discord:</strong> <a href="https://discadia.com/pubgpolska" target="_blank">PUBG POLSKA</a></li>
            </ul>
        </section>

        <section id="sponsorzy">
            <h3 class="collapsible-trigger">Sponsorzy (Kliknij, aby rozwinąć)</h3>
            <div class="collapsible-content expanded">
                <p style="text-align: center; color: #bbb; margin-bottom: 30px;">Wielkie podziękowania dla wszystkich wspierających!</p>
                <div class="top-sponsors-container">
                    <p>Miejsce na sponsorów</p>
                </div>
            </div>
        </section>

        <section id="teamy">
            <h3 class="collapsible-trigger">Zapisane Teamy</h3>
            <div class="collapsible-content expanded">
                <p style="color:#bbb; margin-bottom:20px;">Lista pobierana na żywo z arkusza Google.</p>
                <div id="team-list-dynamic" class="team-grid">
                    <p>Ładowanie listy drużyn...</p>
                </div>
            </div>
        </section>

        <section id="wyniki">
            <h3>Wyniki Końcowe</h3>
            <div class="tabs-nav">
                <button class="tab-link active" data-tab="generalna">Generalna</button>
                <button class="tab-link" data-tab="gra1">Gra 1</button>
                <button class="tab-link" data-tab="gra2">Gra 2</button>
            </div>

            <div id="tab-generalna" class="tab-content active">
                <div class="results-table-container">
                    <table class="results-table" id="table-generalna">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Team</th>
                                <th>Pkt (Rank)</th>
                                <th>Kills</th>
                                <th>Suma</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td colspan="5">Pobieranie wyników...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div id="tab-gra1" class="tab-content">
                <p style="text-align:center; padding:20px;">Szczegółowe wyniki gier dostępne wkrótce.</p>
            </div>
            <div id="tab-gra2" class="tab-content">
                <p style="text-align:center; padding:20px;">Szczegółowe wyniki gier dostępne wkrótce.</p>
            </div>
        </section>

        <section id="regulamin">
            <h3>Regulamin Turnieju</h3>
            <div class="rules-container">
Regulamin Turnieju PUBG POLSKA CUP 2025
(Treść regulaminu pozostaje bez zmian - skrócona dla czytelności kodu)
            </div>
        </section>

        <section id="kontakt">
            <h3>Kontakt</h3>
            <p style="color:#ccc;">W razie pytań zapraszamy na Discord:</p>
            <ul class="info-list">
                <li><strong>Organizator:</strong> <a href="https://discordapp.com/users/397785664373915659" target="_blank">Akerman88</a></li>
                <li><strong>Technik:</strong> <a href="https://discordapp.com/users/605726001539973121" target="_blank">KAROL3K</a></li>
            </ul>
        </section>

    </div>

    <footer>
        &copy; 2025 PUBG POLSKA. Strona nie jest powiązana z KRAFTON, Inc.
    </footer>
</div>

<script>
    // ===========================================
    // 1. OBSŁUGA ROZWIJANIA SEKCJI
    // ===========================================
    document.querySelectorAll('.collapsible-trigger').forEach(header => {
        header.addEventListener('click', () => {
            const content = header.nextElementSibling;
            if (content) content.classList.toggle('expanded');
        });
    });

    // ===========================================
    // 2. FUNKCJA POMOCNICZA: PARSOWANIE CSV
    // ===========================================
    function parseCSVRow(row) {
        const columns = [];
        let current = '';
        let inQuotes = false;
        for(let i=0; i<row.length; i++){
            if(row[i] === '"') { inQuotes = !inQuotes; }
            else if(row[i] === ',' && !inQuotes) { columns.push(current); current = ''; }
            else { current += row[i]; }
        }
        columns.push(current);
        return columns.map(c => c.trim().replace(/^"|"$/g, ''));
    }

    // ===========================================
    // 3. POBIERANIE DRUŻYN (Z NOWEGO LINKU)
    // ===========================================
    const TEAMS_SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTzAWriqhg0FLKBYp54Kc3ovG1lyusvD_mXyBm_9Qzi5MQuQ8zZ9bmxOX3xqU_7XJ7hR4O1kOlfYCfN/pub?output=csv';

    async function loadTeams() {
        const list = document.getElementById('team-list-dynamic');
        try {
            const response = await fetch(TEAMS_SHEET_URL);
            if(!response.ok) throw new Error("Błąd pobierania drużyn");
            
            const text = await response.text();
            const rows = text.split(/\r?\n/);
            
            list.innerHTML = ''; 
            let count = 0;

            // Pomijamy nagłówek (rows.slice(1))
            rows.slice(1).forEach(row => {
                if(!row.trim()) return;
                const cols = parseCSVRow(row);

                // MAPOWANIE KOLUMN WEDŁUG TWOICH INSTRUKCJI:
                // B -> index 1 (Nazwa Drużyny)
                // C -> index 2 (Kapitan)
                // E -> index 4 (Gracz 2)
                // G -> index 6 (Gracz 3)
                // I -> index 8 (Gracz 4)
                // K -> index 10 (Gracz 5 / Rezerwowy)

                const teamName = cols[1]; 
                const cap = cols[2];
                const p2 = cols[4];
                const p3 = cols[6];
                const p4 = cols[8];
                const rez = cols[10];

                if(!teamName) return; 

                count++;
                const card = document.createElement('div');
                card.className = 'team-card';
                
                let playersHtml = `<ul class="player-sublist">`;
                if(cap) playersHtml += `<li class="captain">${cap} (C)</li>`;
                if(p2) playersHtml += `<li>${p2}</li>`;
                if(p3) playersHtml += `<li>${p3}</li>`;
                if(p4) playersHtml += `<li>${p4}</li>`;
                if(rez) playersHtml += `<li>${rez} (Rez)</li>`;
                playersHtml += `</ul>`;

                card.innerHTML = `
                    <div class="team-card-header">
                        <span class="team-number">${count}.</span>
                        <span class="team-name">${teamName}</span>
                    </div>
                    ${playersHtml}
                `;
                
                card.querySelector('.team-card-header').addEventListener('click', function() {
                    this.nextElementSibling.classList.toggle('expanded');
                });
                
                list.appendChild(card);
            });

            if(count === 0) list.innerHTML = '<p style="padding:10px;">Brak drużyn.</p>';

        } catch(e) {
            console.error(e);
            list.innerHTML = '<p style="padding:10px; color:red;">Błąd ładowania listy drużyn.</p>';
        }
    }
    loadTeams();

    // ===========================================
    // 4. POBIERANIE WYNIKÓW (Z NOWEGO LINKU)
    // ===========================================
    const RESULTS_SHEET_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTQHZt7zFrSww08YRkMTNn9V1Le7Qn0l1Eo50czIB294i4ompyBNBStPhiaqAMZ4gnwAZtvR6L8YSkC/pub?gid=0&single=true&output=csv';

    async function loadResults() {
        const tbody = document.querySelector('#table-generalna tbody');
        try {
            const response = await fetch(RESULTS_SHEET_URL);
            if(!response.ok) throw new Error("Błąd pobierania wyników");
            
            const text = await response.text();
            const rows = text.split(/\r?\n/);
            
            tbody.innerHTML = '';
            
            // Zakładam, że w CSV pierwszy wiersz to nagłówki, więc biorę od 2 wiersza
            // Jeśli Twój CSV nie ma nagłówków, usuń .slice(1)
            rows.slice(1).forEach(row => {
                if(!row.trim()) return;
                const cols = parseCSVRow(row);
                
                // UWAGA: Nie podałeś, które kolumny w arkuszu wyników to Punkty, Kills itp.
                // Przyjmuję standardowo kolejność: 
                // Kolumna A (0): Miejsce (#)
                // Kolumna B (1): Nazwa Teamu
                // Kolumna C (2): Punkty za miejsce (Placement)
                // Kolumna D (3): Kills
                // Kolumna E (4): Suma
                
                // Jeśli w arkuszu jest inaczej, zmień cyfry w nawiasach []
                
                const rank = cols[0];
                const team = cols[1];
                const placePts = cols[2];
                const kills = cols[3];
                const total = cols[4];

                // Prosta walidacja - jeśli nie ma nazwy teamu, pomiń
                if(!team) return;

                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${rank}</td>
                    <td>${team}</td>
                    <td>${placePts}</td>
                    <td>${kills}</td>
                    <td>${total}</td>
                `;
                tbody.appendChild(tr);
            });
            
            if(tbody.children.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5">Brak danych w arkuszu wyników.</td></tr>';
            }

        } catch(e) {
            console.error(e);
            tbody.innerHTML = '<tr><td colspan="5" style="color:red">Nie udało się pobrać wyników.</td></tr>';
        }
    }
    loadResults();

    // ===========================================
    // 5. OBSŁUGA ZAKŁADEK (TABS)
    // ===========================================
    document.querySelectorAll('.tab-link').forEach(btn => {
        btn.addEventListener('click', () => {
            document.querySelectorAll('.tab-link').forEach(b => b.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            btn.classList.add('active');
            const tabKey = btn.dataset.tab;
            const targetId = 'tab-' + tabKey;
            document.getElementById(targetId).classList.add('active');
        });
    });
</script>

</body>
</html>